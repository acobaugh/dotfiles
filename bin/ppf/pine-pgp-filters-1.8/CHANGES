# $Id: CHANGES,v 1.13 2010/07/29 19:58:08 dougb Exp $

----- July 2010 - Version 1.8 released -----

3. Complete overhaul of ppf_mime. Determine the MIME message boundary
   using more reliable (albeit more complex) means, and special case
   a lot of client behavior to allow verification of a wider variety
   of messages. For display, de-code more of the MIME en-coding so that
   the messages are much more readable. Use the same tricks to display
   decrypted messages in ppf_mime_decrypt.

   These changes have several major benefits:
   a. Support for PGP/MIME  messages generated by well over a dozen MUAs.
   b. Support for verifying signatures on attachments, and a clear
      indication that attachments are signed (or not).
   c. Greatly improved readability. With the exception of text coloring
      (URLs, signatures, etc.), 8-bit characters, and some types of
      messages sent with format=flowed, messages displayed by the filter
      are identical to the display in Alpine.

2. For ppf_{decrypt|encrypt|sign|verify} add 'clear' commands so that
   nothing is left behind in the "user interface" area between scripts.
   For _verify, add a message indicating that we are verifying, along
   with a helpful hint about delays caused by auto-key-retrieve.

1. Add /opt/bin and /opt/local/bin to the gpg[2] search path in configure
   in case it is located there, and that's not going to be $PREFIX.

----- April 2010 - Version 1.7 released -----

2. Add support for the OpenPGP header in ppf_sign and ppf_encrypt, and
   use the same method to sanitize the key ID as was already done for
   the other headers.

1. Use a more reliable method to find the signature and message parts
   in the ppf_mime script.

----- November 2007 - Version 1.6 released -----

1. Check for gpg2 first, and prefer it if available.

----- November 2007 - Version 1.5 released -----

3. Add a --- Status --- line for the beginning and end of the PGP
   stuff which includes a timestamp to help avoid a socially engineered
   message that includes the "good signature" output in the same format
   as what we print.

2. Make sure that all --- Status --- messages are 76 characters long.

1. When displaying MIME messages after verification, substitute a space
   for the MIME'ified =20 character at the end of a line, and substitute
   an = sign for the MIME'ified =3D. This greatly improves readability
   of the verified message.

----- July - October 2007 - Version 1.4 developed, not released -----

NB: Support for older versions of pgp, and PGP from PGP Inc. has
been dropped in this version. GnuPG is now a requirement. This is
in line with the requirements for other PGP addons such as enigmail
for Thunderbird.

Benjamin R. Haskell, pine-pgp ~ benizi.com was instrumental in helping
to suggest methods for and test the results of changes 1-5 in this
version. Thanks!

6. Fix error handling in ppf_mime_decrypt, and make use of the $cfile
   variable instead of guessing which file has the message.

5. Look for gpg in PREFIX/bin, /usr/bin, and /bin in that order.

4. Move "build" of the scripts to an all target in the Makefile.

3. Change to using csplit since command line options for both
   GNU and BSD versions are compatible, unlike split.

2. Improve portability for users of GNU make and mktemp.

1. Add error handling for failed TDIR creation in ppf_decrypt,
   ppf_verify, and ppf_mime*.

----- October 2006 - Version 1.3 released -----

6. Include more mail headers in the grep'ed output of the MIME scripts,
   and try to strip more MIME headers from the message.

5. Use local for function variables.

4. Remove commented out code for really old versions of pgp.

3. Do a better job of finding the crucial bits of a MIME message, and
   fail more gracefully if we do not.

2. Fix bug that prevented ppf_mime* from working with messages sent by
   Evolution, KMail, and any other MIME client that interprets RFC 3156
   the same way. (Thanks to Bjoern A. Zeeb <bzeeb@zabbadoz.not> for the tip!)

1. Update e-mail and web addresses.

----- April 2005 - Version 1.2 released -----

7. Update copyright for this year, and use my full given name.

6. For sign and encrypt, scan the headers to determine the right user.
   This requires adding _INCLUDEALLHDRS_ to the filter line.

5. Add a message to tell users why their password is needed for ppf_decrypt.

4. Create symlinks in PREFIX/bin for the ppf_mime* scripts.

3. Add User-Agent to the list of headers to display in mime filters.

2. Add a first pass at a ppf_mime_decrypt script. More work is
   needed here, see BUGS.

1. In some past version of Pine, the display of filter output changed,
   so adjust the line length of some of the messages to accommodate.

----- September 2003 - Version 1.1 released -----

2. Handle failure conditions more gracefully, and more informatively.

1. Assign copyright to myself. Since "The FreeBSD Project" is not a legal
   entity, it cannot own a copyright.

----- January 2003 - Version 1.0 released -----
