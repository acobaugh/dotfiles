dotfiles=""
plainfiles=""
test -f "$BASE/dotfiles/config" && . "$BASE/dotfiles/config"

link() {
	target=$1
	linkname=$2

	if [ ! -d "$(dirname "$linkname")" ] ; then
		echo "   mkdir $(dirname "$linkname")"
		mkdir -p "$(dirname "$linkname")"
	fi
	if [ "$(p_readlink "$linkname")" = "$(p_readlink "$target")" ] ; then
		echo "  Already up to date"
	else
		out=$(ln -sf "$target" "$linkname" 2>&1)
		test -n "$out" && echo "  $out"
	fi
}

p_readlink() { readlink -f "$1" || echo "$1" }

